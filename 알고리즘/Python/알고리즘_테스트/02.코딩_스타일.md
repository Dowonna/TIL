2021-08-04 | 신규 작성

---

# 2. 코딩 스타일

코딩 테스트를 준비하는데 코딩 스타일은 중요하지 않다고 생각할 수 있을 것 같다. 실제로 온라인 코딩 테스트에서 코딩 스타일은 중요하지 않다. 다만 점수만을 놓고 순위를 가리는 경쟁 대외가 아닌, 채용을 위한 코딩 테스트는 조금 다르다. 제출한 코드의 품질을 평가할 수 있기 때문이다. 아무리 코드가 엉망이더라도 고득점을 받았다면 보통 인터뷰 기회는 주어진다. 그러나 인터뷰 시 "왜 코드를 이렇게 작성했나요?"에 대한 질문에 시달리게 될 것이고 여기에 제대로 대답하지 못한다면 결과는 좋지 않을 것이다.

좋은 코드는 가능한 한 많은 사람이 좋아하며 선호하는 방식을 택하는 것이 중요하다. 개발은 혼자서만 하는 것이 아니며, 좋은 코드란 모두가 이해할 수 있을 때 더 높은 가치를 발휘하기 때문이다. 무엇보다도 파이썬에는 지향하는 방식, 예를 들자면 카멜 케이스를 쓰지 않고 스네이크 케이스를 쓴다든지와 같은 뚜렷한 지향점이 있다. 되도록 이러한 지향점에 맞춰 코드를 작성하길 권한다.

## 2.1 변수명과 주석
먼저, 문자열에 매칭된 서브 시퀀스의 개수를 구하는 코드를 소개하겠다. 코드 내에 변수명을 아무렇게나 지정하고 주석도 없이 작성된 코드부터 살펴보자.

```python
def numMatchingSubSeq(self, S: words: List[str]) -> int:
	a = 0

	for b in words:
		c = 0
		for i in range(len(b)):
			d = S[c:].find(b[i])
			if d < 0:
				a -= 1
				break
			else:
				c += d + 1
		a += 1

	return a
```

위의 코드를 처음 접했을 때에는 변수명이 무엇을 의미하는지를 이해하기 어려우며,알고리즘에 대한 주석이 없어서 어떻게 동작하는지 파악하기도 쉽지 않다.

따라서 필자는 코딩 테스트에서 제출한 결과물에 대해 주석을 상세히 다는 방식을 선호하며, 인터뷰 시에는 해당 주석에 대해 논의하는 편이다.

```python
def numMatchingSubSeq(self, S: words: List[str]) -> int:
	matched_count = 0

	for word in words:
		pos = 0
		for i in range(len(word)):
			# 각 문자열에 맞는 위치 찾기
			found_pos = S[pos:].find(word[i])
			if found_pos < 0:
				matched_count -= 1
				break
			else:  # 문자열을 찾으면 위치를 한 칸 이동시킨다
				pos += found_pos + 1
		matched_count += 1

	return matched_count
```

개인적으로 파이썬에서는 간단한 주석을 부여하는 편이 훨씬 가독성이 높아 보인다. 변수명도 마찬가지다. 의미 없는 이름(a, b, c 등)보다는 각각의 의미를 부여해 작명했고 파이썬의 PEP 8 문서 기준에 따라 모두 스네이크 케이스로 작성했다.

참고로 주석은 한글로 달아도 무방하지만 영어로 작성하는 것에도 부담이 없어야 한다. 최소한 자연스럽게 영어로 주석을 읽고 쓰는 데 아무런 부담이 없을 정도로 익숙해질 필요가 있다. 그래야 좀 더 프로페셔널하다는 인상을 줄 수 있기 때문이다. 그리고 코딩 테스트 시에는 부가 설명을 덧붙일 수 없기 때문에 항상 코드에 상세한 주석을 달아두는 습관을 들이는 것을 권장하는 추세이다.

## 2.2 리스트 컴프리헨션

리스트 컴프리헨션은 파이썬의 매우 강력한 기능 중 하나이며, 파이썬을 대표하는 특징 중 하나이다. 하지만 특유의 문법과 의미를 축약하여 나타내는 특징 덕분에 지나치게 남발하게 되면 가독성을 떨어트리는 요인이 되기도 한다. 다음과 같은 리스트 컴프리헨션은 가독성을 떨어트리는 대표적인 예시이다.

```python
str1s = [str1[i:i + 2].lower() for i in range(len(str1) - 1) if re.findall('[a-z]{2}', str1[i:i + 2].lower())]
```

리스트 컴프리헨션은 그 강력함으로 인해 대부분 한 줄로 적게 되는 경우가 많은데, 이 경우에도 가능한 대로 다음과 같이 역할별로 줄 구분을 하면 훨씬 가독성이 높아지고 이해하기 쉬워진다. 다음 코드는 위의 코드를 줄바꿈을 해서 정리한 것이다.

```python
str1s = [
	str1[i:i + 2].lower() for i in range(len(str1) - 1)
	if re.findall('[a-z]{2}', str1[i:i + 2].lower())
]
```

한 줄 풀이에 집착하기 보다는 라인을 좀 더 여유있게 활용하여 가독성을 높였다. 또한 앞서 설명한 것처럼 표현식이 2개를 넘지 않게 하여 복잡도를 줄였다. 람다 표현식보다는 낫지만 그래도 리스트 컴프리헨션은 여전히 풀어쓰는 것에 비해서는 가독성이 떨어진다.

```python
str1s = []
for i in range(len(str1) - 1):
	if re.findall('[a-z]{2}', str1[i:i + 2].lower()):
		str1s.append(str1[i:i + 2].lower())
```

위의 방법처럼 모두 풀어쓰는 것도 가독성을 위해서라면 나쁘지 않다. 코드를 읽는 방향이 위에서 아래까지 차례대로 정방향이기 때문에 훨씬 이해하기 쉽다. 굳이 짧은 줄 수를 고집할 필요는 없다. 경우에 따라서는 가독성을 위해 모두 풀어쓰는 것도 검토해 볼 만하다. 다음과 같이 여러 표현식을 여러 줄에 걸쳐 표현하면 가독성이 지나치게 떨어진다.

```python
return [(x, y, z)
			for x in range(5)
			for y in range(5)
			if x != y
			for z in range(5)
			if y != z]
```

## 2.3 Google 파이썬 스타일 가이드

Google 파이썬 스타일 가이드는 Google에서 정한 스타일 가이드로, 이미 파이썬에는 공식 스타일 가이드인 PEP 8이 있지만 Google의 스타일 가이드에는 PEP 8에서는 설명하지 않은 좋은 코드를 위한 지침들이 여러 있다. 특히 가독성을 높이기 위한 지침들이 많은데, Google 파이썬 스타일 가이드의 여러 지침 중 몇 가지만 살펴보도록 하겠다.

먼저, 함수의 기본 값으로 가변 객체(Mutable Object)를 사용하지 않아야 한다. 함수가 객체를 수정하면 기본값이 변경되기 때문이다. 따라서 다음과 같이 기본값으로 []나 {}를 사용하는 것은 지양해야 한다.

```python
No: def foo(a, b=[]):

No: def foo(a, b: Mapping = {}):
...
```

대신 다음과 같이 불변 객체(Immutable Object)를 사용한다. None을 명시적으로 할당하는 것도 좋은 방법이다.

```python
Yes: def foo(a, b=None):
			if b is None:
				b = []

Yes: def foo(a, b: Optional[Sequence] = None):
			if b is None:
				b = []
```

`True`, `False`를 판별할 때는 암시적(Implicit)안 방법을 사용하는 편이 간결하고 가독성이 높다. 즉 굳이 False임을 `if foo != []:` 같은 형태로 판별할 필요가 없다. `if foo:`로 충분하다. 이외에도 몇 가지 정리해보면 다음과 같다.

```python
Yes: if not users:
			print('no users')							    ①

		if foo == 0:
			self.handle_zero()							②

		if i % 10 == 0:
			self.handle_multiple_of_ten()		③

No:  if len(users) == 0:
			print('no users')

		if foo is not None and not foo:
			self.handle_zero()

		if not i % 10:
			self.handle_multiple_of_ten()
```

`len(users) == 0`으로 길이가 없다는 말은 값이 없다는 뜻이며 ①과 같이 `not users`로 충분하다. 또한 가독성도 더 높다. 정수를 처리할 때는 암시적으로 거짓 여부를 판별하기 보다는 ②와 같이 비교 대상이 되는 정수값을 직접 비교하는 편이 덜 위험하다. 마찬가지로 모듈로 연산 결과가 0인 것을 정수로 처리하지 않고 암시적 거짓 여부로 판별하는 것은 위험하다. 뿐만 아니라 가독성도 떨어진다. ③과 같이 `i % 10 == 0`으로 명시적으로 값을 비교하는 편이 좋다. 이외에도 세미콜론으로 줄을 끝내서는 안 되며, 세미콜론을 사용해 같은 줄에 두 문장을 써서도 안 된다.

최대 줄 길이는 80자로 한다. 이것도 나름의 암묵적인 약속이 있는데, 줄의 가로 길이는 길어서는 안된다는 점이다. Google 파이썬 스타일 가이드에서도 마찬가지로 80자로 제한하고 있다.